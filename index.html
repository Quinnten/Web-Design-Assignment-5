<!DOCTYPE html>

<html>
  <head>
    <title>Amicable Numbers</title>
    <link rel="stylesheet" href="./index.css">
    <script>
      let num1, num2;

    findFactors = (array, num) => {
      for(i = 1; i < Math.ceil((num/2)+1); i++) {
        if(num%i == 0) {
          array.push(i);
        }
      }
      return array;
    }

    findSum = (array) => {
      var sum = 0;
      for (i = 0; i < array.length; i++) {
        sum += array[i];
      }
      return sum;
    }

    areAmicable = (array1, num1, array2, num2) => {
      let sum1 = findSum(array1);
      let sum2 = findSum(array2);

      if (sum1 == num2 && sum2 == num1){
        return true;
      } else {
        return false;
      }
    }

    showData = () => {
      num1 = document.getElementById('num1').value
      num2 = document.getElementById('num2').value

      if (num1 == null || num2 == null || num2 < 1 || num1 < 1) {
        document.getElementById("errorMessage").innerHTML = "we need numbers greater than zero";
       } else {
        let num1Factors = [];
        let num2Factors = [];
        num1Factors = findFactors(num1Factors, num1);
        num2Factors = findFactors(num2Factors, num2);
    

        if(areAmicable(num1Factors, num1, num2Factors, num2)) {
          let sum1 = findSum(num1Factors);
          let sum2 = findSum(num2Factors);

          document.getElementById("num1Info").innerHTML = "" + num1;
          document.getElementById("num1factors").innerHTML = "" + num1Factors.join(", ");;
          document.getElementById("num1sum").innerHTML = "" + sum1;

          document.getElementById("num2Info").innerHTML = "" + num2;
          document.getElementById("num2factors").innerHTML = "" + num2Factors.join(", ");;
          document.getElementById("num2sum").innerHTML = "" + sum2;

          document.getElementById("results").innerHTML = "The numbers " + num1 + " and " + num2 + " are amicable! YAY!"

        } else {
          let sum1 = findSum(num1Factors);
          let sum2 = findSum(num2Factors);

          document.getElementById("num1Info").innerHTML = "" + num1;
          document.getElementById("num1factors").innerHTML = "" + num1Factors.join(", ");;
          document.getElementById("num1sum").innerHTML = "" + sum1;

          document.getElementById("num2Info").innerHTML = "" + num2;
          document.getElementById("num2factors").innerHTML = "" + num2Factors.join(", ");
          document.getElementById("num2sum").innerHTML = "" + sum2;

          document.getElementById("results").innerHTML = "The numbers " + num1 + " and " + num2 + " are NOT amicable. Sorry :("

        }
      }
    }
    </script>

  </head>
  <body>
    <div class="heading">
      <h1>Amicable Numbers</h1>
    </div>
    <div class="mainBody">
      <form class="formField">
        <label>Give us a number</label></br>
        <input type="number" id="num1"></br>
        <label>Give as a second number</label></br>
        <input type="number" id="num2"></br>
        <input type="button" value="Submit" onclick=showData()>
      </form>

      <div id="errorMessage"></div>

      <div class="numInfo">
        <h2 id="num1Info"></h2>
        <h4>These are the factors</h4>
        <p id="num1factors">Factors: </p>
        <h4>Sum of factors</h4>
        <p id="num1sum">Sum = </p>
      </div>

      <div class="numInfo">
        <h2 id="num2Info"></h2>
        <h4>These are the factors</h4>
        <p id="num2factors">Factors: </p>
        <h4>Sum of factors</h4>
        <p id="num2sum">Sum = </p>
      </div>

      <div class="numInfo">
        <h2>Results</h2>
        <p id="results"></p>
      </div>
    </div>
  </body>
</html>